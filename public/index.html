<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Distrito Padel - Reserva tu cancha</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --primary-green: #26422b;
      --primary-green-light: #3a5f40;
      --primary-green-lighter: #d4e6d6;
    }
    
    .bg-primary { background-color: var(--primary-green); }
    .bg-primary-light { background-color: var(--primary-green-light); }
    .bg-primary-lighter { background-color: var(--primary-green-lighter); }
    .text-primary { color: var(--primary-green); }
    .border-primary { border-color: var(--primary-green); }
    .border-primary-light { border-color: var(--primary-green-light); }
    
    .bg-login {
      background-image: url('fondo-login.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }
    
    img {
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
    }
    
    .tab-btn.active { 
      background: linear-gradient(to right, #26422b, #1e3621); 
      color: white; 
    }
    
    .cancha-btn { transition: all 0.2s; }
    .cancha-btn:hover { transform: scale(1.05); }
    .cancha-btn.selected {
      background-color: #26422b;
      color: white;
      border-color: #26422b;
    }
    
    .btn-primary {
      background: linear-gradient(to right, #26422b, #1e3621);
      color: white;
    }
    .btn-primary:hover {
      background: linear-gradient(to right, #1e3621, #26422b);
    }

    /* Estilos para el switch */
    input[type="checkbox"].toggle-switch {
      appearance: none;
      width: 3rem;
      height: 1.5rem;
      background-color: #d1d5db;
      border-radius: 9999px;
      position: relative;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    input[type="checkbox"].toggle-switch:checked {
      background-color: var(--primary-green);
    }

    input[type="checkbox"].toggle-switch::before {
      content: '';
      position: absolute;
      width: 1.25rem;
      height: 1.25rem;
      background-color: white;
      border-radius: 9999px;
      top: 0.125rem;
      left: 0.125rem;
      transition: transform 0.3s;
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }

    input[type="checkbox"].toggle-switch:checked::before {
      transform: translateX(1.5rem);
    }

    /* Ocultar scrollbar pero mantener funcionalidad */
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>
  
  <link rel="preload" as="image" href="logo.png">
  <link rel="preload" as="image" href="logo2.png">
  <link rel="preload" as="image" href="fondo-login.jpg">
</head>
<body class="bg-gray-50">

  <!-- AUTH SECTION CON FONDO -->
  <div id="authSection" class="min-h-screen flex items-center justify-center px-4 py-12 bg-login relative">
    <div class="absolute inset-0 bg-black opacity-40"></div>
    
    <div class="max-w-md w-full relative z-10">
      <div class="text-center mb-8">
        <img src="logo.png" alt="Distrito Padel" class="w-full max-w-lg mx-auto mb-4 object-contain" loading="eager">
        <p class="text-white text-xl font-bold drop-shadow-lg">Reserva tu cancha facilmente</p>
      </div>

      <!-- Tabs -->
      <div class="flex gap-2 mb-6">
        <button class="tab-btn flex-1 py-3 px-6 rounded-lg font-bold shadow active bg-white" onclick="mostrarFormLogin()">
          Iniciar Sesion
        </button>
        <button class="tab-btn flex-1 py-3 px-6 rounded-lg font-bold bg-white text-gray-600" onclick="mostrarFormRegistro()">
          Registro
        </button>
      </div>

      <!-- Login Form -->
      <div id="loginForm" class="bg-white rounded-xl shadow-md p-8">
        <h2 class="text-2xl font-bold mb-6 text-gray-800">Iniciar Sesion</h2>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-bold mb-2">Email</label>
            <input type="email" id="loginEmail" placeholder="tu@email.com" 
              class="w-full px-4 py-3 border-2 rounded-xl focus:border-primary focus:outline-none">
          </div>
          <div>
            <label class="block text-sm font-bold mb-2">Contrasena</label>
            <input type="password" id="loginPassword" placeholder="********" 
              class="w-full px-4 py-3 border-2 rounded-xl focus:border-primary focus:outline-none">
          </div>
          <button onclick="login()" 
            class="w-full py-3 btn-primary rounded-xl font-bold hover:shadow-lg transition">
            Entrar
          </button>
        </div>
      </div>

      <!-- Register Form -->
      <div id="registerForm" class="bg-white rounded-xl shadow-md p-8 hidden">
        <h2 class="text-2xl font-bold mb-6 text-gray-800">Crear Cuenta</h2>
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-bold mb-2">Nombre Completo</label>
            <input type="text" id="regNombre" placeholder="Juan Perez" 
              class="w-full px-4 py-3 border-2 rounded-xl focus:border-primary focus:outline-none">
          </div>
          <div>
            <label class="block text-sm font-bold mb-2">Email</label>
            <input type="email" id="regEmail" placeholder="tu@email.com" 
              class="w-full px-4 py-3 border-2 rounded-xl focus:border-primary focus:outline-none">
          </div>
          <div>
            <label class="block text-sm font-bold mb-2">Telefono (10 digitos)</label>
            <input type="tel" id="regTelefono" placeholder="5551234567" maxlength="10"
              class="w-full px-4 py-3 border-2 rounded-xl focus:border-primary focus:outline-none">
          </div>
          <div>
            <label class="block text-sm font-bold mb-2">Contrasena</label>
            <input type="password" id="regPassword" placeholder="Minimo 6 caracteres" 
              class="w-full px-4 py-3 border-2 rounded-xl focus:border-primary focus:outline-none">
          </div>
          <button onclick="registrar()" 
            class="w-full py-3 btn-primary rounded-xl font-bold hover:shadow-lg transition">
            Registrarse
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- DASHBOARD SECTION -->
  <div id="dashboardSection" class="hidden min-h-screen">
    <!-- Header -->
    <header class="bg-primary text-white py-3 shadow-lg">
      <div class="container mx-auto px-4 flex items-center justify-between">
        <div class="flex items-center">
          <img src="logo2.png" alt="Distrito Padel" class="h-20 object-contain" loading="lazy">
        </div>
        <div id="userInfo" class="text-right">
          <p class="font-bold text-sm" id="userNombre"></p>
          <button onclick="logout()" class="text-xs opacity-80 hover:opacity-100">Cerrar sesion</button>
        </div>
      </div>
    </header>

    <!-- Contenido -->
    <div class="container mx-auto px-4 py-8">
      <!-- Boton Mis Reservas -->
      <div class="flex gap-4 mb-6">
        <button onclick="verMisReservas()" 
          class="flex-1 py-3 bg-[#ffedbb] text-gray-800 rounded-xl font-bold hover:bg-[#ffd98a] transition">
          Mis Reservas
        </button>
      </div>

      <!-- CALENDARIO CARRUSEL - MÁS PEQUEÑO -->
      <div class="bg-white rounded-xl shadow-md p-4 mb-6">
        <h2 class="text-xl font-bold mb-3 text-primary">Selecciona Fecha</h2>
        <div id="calendarioCarrusel">
          <!-- Se genera dinamicamente -->
        </div>
      </div>

      <!-- Canchas -->
      <div class="bg-white rounded-xl shadow-md p-6 mb-6">
        <h2 class="text-2xl font-bold mb-4 text-primary">Selecciona Cancha</h2>
        <div class="grid grid-cols-3 gap-4">
          <button onclick="seleccionarCancha(1)" 
            class="cancha-btn py-4 bg-primary-lighter border-2 border-primary rounded-xl font-bold">
            Cancha 1
          </button>
          <button onclick="seleccionarCancha(2)" 
            class="cancha-btn py-4 bg-primary-lighter border-2 border-primary rounded-xl font-bold">
            Cancha 2
          </button>
          <button onclick="seleccionarCancha(3)" 
            class="cancha-btn py-4 bg-primary-lighter border-2 border-primary rounded-xl font-bold">
            Cancha 3
          </button>
        </div>
      </div>

      <!-- Horarios Disponibles con Switch de Filtro - 4x4 EN MOBILE -->
      <div class="bg-white rounded-xl shadow-md p-4 mb-6">
        <div class="flex justify-between items-center mb-3">
          <h2 class="text-xl font-bold text-primary">Horarios</h2>
          
          <!-- SWITCH FILTRO -->
          <div class="flex items-center gap-2">
            <span class="text-xs font-semibold text-gray-700">Solo disponibles</span>
            <input 
              type="checkbox" 
              id="switchDisponibles" 
              class="toggle-switch"
              onchange="toggleFiltroDisponibles()"
            />
          </div>
        </div>
        
        <p class="text-xs text-gray-600 mb-3">Selecciona un horario</p>
        
        <div id="horariosDisponibles" class="grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2">
          <!-- Se genera dinamicamente -->
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Seleccion de Duracion -->
  <div id="duracionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold text-primary" id="duracionModalTitulo">Selecciona duracion</h2>
        <button onclick="cerrarModalDuracion()" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
      </div>
      <div id="duracionModalOpciones">
        <!-- Se genera dinamicamente -->
      </div>
    </div>
  </div>

  <!-- Modal Confirmacion -->
  <div id="confirmacionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-8">
      <h2 class="text-3xl font-bold text-primary mb-6">Confirmar Reserva</h2>
      <div id="confirmacionDetalle" class="space-y-2 mb-6"></div>
      <div class="flex gap-4">
        <button onclick="confirmarReserva()" 
          class="flex-1 py-3 btn-primary rounded-xl font-bold hover:shadow-lg">
          Confirmar
        </button>
        <button onclick="cerrarModal()" 
          class="flex-1 py-3 bg-gray-600 text-white rounded-xl font-bold hover:bg-gray-700">
          Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Mis Reservas -->
  <div id="misReservasModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
    <div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto p-8">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-3xl font-bold text-primary">Mis Reservas</h2>
        <button onclick="cerrarMisReservas()" class="text-gray-500 hover:text-gray-700 text-3xl">&times;</button>
      </div>
      <div id="misReservasList"></div>
    </div>
  </div>

  <script>
    function mostrarFormLogin() {
      document.getElementById('loginForm').classList.remove('hidden');
      document.getElementById('registerForm').classList.add('hidden');
      document.querySelectorAll('.tab-btn')[0].classList.add('active');
      document.querySelectorAll('.tab-btn')[1].classList.remove('active');
    }

    function mostrarFormRegistro() {
      document.getElementById('loginForm').classList.add('hidden');
      document.getElementById('registerForm').classList.remove('hidden');
      document.querySelectorAll('.tab-btn')[1].classList.add('active');
      document.querySelectorAll('.tab-btn')[0].classList.remove('active');
    }
  </script>
  <script src="app.js"></script>
</body>
</html>
